<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS PRIME v51 | Hybrid Complete</title>
    <style>
        :root {
            --bg-color: #0a0a0a;
            --card-bg: #141414;
            --accent: #00d4ff;     /* Standard: Cyan */
            --text-main: #ffffff;
            --text-dim: #888888;
            --border: #333;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-family);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            padding-bottom: 90px; /* Platz f√ºr die untere Leiste */
            transition: background 0.3s;
        }

        /* HEADER */
        header {
            width: 100%;
            max-width: 1000px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; }
        .logo span { color: var(--accent); transition: color 0.3s; }

        .controls { display: flex; align-items: center; gap: 8px; }
        .btn-control {
            background: #222;
            border: 1px solid #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: 0.2s;
        }
        .btn-control:hover { border-color: var(--accent); color: var(--accent); }
        
        #status-badge { font-size: 0.7rem; color: #555; margin-left: 5px; }

        /* LAYOUT CONTAINER */
        .layout-container {
            width: 100%;
            max-width: 1000px;
            display: none; /* Standard: Ausblenden */
            animation: fadeIn 0.4s ease;
        }
        .layout-container.active { display: grid; gap: 20px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* GRID STYLES */
        #layout-classic { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        #layout-modern { grid-template-columns: 1fr; }

        /* CARDS */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        h2 { font-size: 0.9rem; margin-bottom: 15px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }

        /* WIDGETS */
        .time-display { font-size: 2.5rem; font-weight: 700; text-align: center; margin: 10px 0; }
        .date-display { text-align: center; color: var(--accent); margin-bottom: 15px; }

        /* INPUTS */
        textarea {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
            outline: none;
            line-height: 1.6;
            min-height: 150px;
        }
        textarea:focus { border-color: var(--accent); }

        /* NAVIGATION BAR (Bottom) */
        .bottom-nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid #333;
            border-radius: 50px;
            display: flex;
            padding: 10px 25px;
            gap: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 100;
            transition: transform 0.3s;
        }
        /* Wenn Modern Mode aktiv ist, Nav ausblenden */
        .bottom-nav.hidden { transform: translate(-50%, 200%); }

        .nav-item {
            font-size: 1.4rem;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.2s;
        }
        .nav-item:hover { opacity: 1; transform: scale(1.1); }
        .nav-item.active { opacity: 1; color: var(--accent); transform: scale(1.1); }

        /* TABS CONTENT (Innerhalb von Classic) */
        .tab-content { display: none; width: 100%; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }

        /* COLOR MENU */
        #color-menu {
            display: none;
            position: absolute;
            top: 70px;
            right: 20px;
            background: #1a1a1a;
            border: 1px solid #444;
            padding: 10px;
            border-radius: 8px;
            z-index: 200;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .color-dot {
            display: inline-block;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            margin: 5px;
            cursor: pointer;
            border: 2px solid #333;
        }
        .color-dot:hover { transform: scale(1.1); border-color: white; }

    </style>
</head>
<body>

    <header>
        <div class="logo">NEXUS <span>PRIME</span></div>
        <div class="controls">
            <button class="btn-control" onclick="toggleColorMenu()">üé®</button>
            <button class="btn-control" onclick="switchLayout()">Mode: <span id="layout-label">Classic</span></button>
            <div id="status-badge">Init...</div>
        </div>
    </header>

    <!-- COLOR MENU -->
    <div id="color-menu">
        <div class="color-dot" style="background: #00d4ff;" onclick="setAccent('#00d4ff')"></div> <!-- Cyan -->
        <div class="color-dot" style="background: #ff0055;" onclick="setAccent('#ff0055')"></div> <!-- Red -->
        <div class="color-dot" style="background: #00ff88;" onclick="setAccent('#00ff88')"></div> <!-- Green -->
        <div class="color-dot" style="background: #ffcc00;" onclick="setAccent('#ffcc00')"></div> <!-- Gold -->
        <div class="color-dot" style="background: #bd00ff;" onclick="setAccent('#bd00ff')"></div> <!-- Purple -->
    </div>


    <!-- ========================================= -->
    <!-- LAYOUT 1: CLASSIC (Mit Tabs & Navi)       -->
    <!-- ========================================= -->
    <div id="layout-classic" class="layout-container active">
        
        <!-- TAB 1: HOME / DASHBOARD -->
        <div id="tab-home" class="tab-content active">
            <div class="card">
                <h2>Zeit & Datum</h2>
                <div class="time-display" id="clock-c">00:00</div>
                <div class="date-display" id="date-c">Lade Datum...</div>
            </div>
            
            <div class="card" style="margin-top: 20px;">
                <h2>Schnell-Notizen (Daily)</h2>
                <textarea id="quick-notes" placeholder="Was steht heute an? (Wird automatisch gespeichert)" oninput="autoSave()"></textarea>
            </div>
        </div>

        <!-- TAB 2: JOURNAL / TAGEBUCH -->
        <div id="tab-journal" class="tab-content">
            <div class="card">
                <h2>Pers√∂nliches Tagebuch</h2>
                <textarea style="height: 400px;" id="journal-text" placeholder="Liebes Tagebuch..." oninput="autoSave()"></textarea>
            </div>
        </div>

        <!-- TAB 3: FINANCE -->
        <div id="tab-finance" class="tab-content">
            <div class="card" style="height: 500px;">
                <h2>Markt Daten</h2>
                <!-- TradingView Widget -->
                <div class="tradingview-widget-container" style="height:100%;width:100%">
                    <div class="tradingview-widget-container__widget" style="height:100%;width:100%"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                    {
                    "colorTheme": "dark",
                    "dateRange": "12M",
                    "showChart": true,
                    "locale": "de_DE",
                    "largeChartUrl": "",
                    "isTransparent": true,
                    "showSymbolLogo": true,
                    "width": "100%",
                    "height": "100%",
                    "tabs": [
                        {
                        "title": "Portfolio",
                        "symbols": [
                            { "s": "XETR:IUSQ", "d": "MSCI World" },
                            { "s": "TVC:GOLD", "d": "Gold" },
                            { "s": "TVC:SILVER", "d": "Silber" },
                            { "s": "BITSTAMP:BTCUSD", "d": "Bitcoin" }
                        ]
                        }
                    ]
                    }
                    </script>
                </div>
            </div>
        </div>

    </div>


    <!-- ========================================= -->
    <!-- LAYOUT 2: MODERN (Focus Mode)             -->
    <!-- ========================================= -->
    <div id="layout-modern" class="layout-container">
        <div class="card" style="text-align: center; border:none; background: transparent;">
            <div class="time-display" id="clock-m" style="font-size: 4rem; opacity: 0.5;">00:00</div>
        </div>

        <div class="card">
            <h2>Deep Focus Mode</h2>
            <textarea style="height: 500px; font-size: 1.1rem;" id="focus-text" placeholder="Schreibe hier ohne Ablenkung..." oninput="autoSave()"></textarea>
        </div>
    </div>


    <!-- ========================================= -->
    <!-- NAVIGATION BAR (Unten)                    -->
    <!-- ========================================= -->
    <div class="bottom-nav" id="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)">üè†</div> <!-- Home -->
        <div class="nav-item" onclick="switchTab('journal', this)">üìñ</div> <!-- Journal -->
        <div class="nav-item" onclick="switchTab('finance', this)">üìà</div> <!-- Finance -->
        <div class="nav-item" onclick="alert('Settings: Coming soon!')">‚öôÔ∏è</div> <!-- Settings -->
    </div>


    <script>
        // ==========================================
        // ‚ö†Ô∏è DEINE CLOUD DATEN HIER EINTRAGEN ‚ö†Ô∏è
        // ==========================================
        const API_KEY = $2a$10$bfQHPAKf8rHB5nCB1nxla.8UbbBLCu6uCSZjrrePZ2JvQv9Jw3XEK; 
        const BIN_ID  = 6983be0443b1c97be965d28c;
        // ==========================================

        let currentMode = 'classic';
        let saveTimer;

        // INIT
        window.onload = function() {
            updateTime();
            loadFromCloud();
            
            // Lade gespeicherte Farbe
            const savedColor = localStorage.getItem('nexus_color');
            if(savedColor) document.documentElement.style.setProperty('--accent', savedColor);
        };

        // --- CLOUD FUNCTIONS ---

        async function loadFromCloud() {
            const badge = document.getElementById('status-badge');
            badge.innerText = "Syncing...";
            
            try {
                let res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, { headers: {"X-Master-Key": API_KEY} });
                if(res.ok) {
                    let json = await res.json();
                    let d = json.record;

                    // Felder f√ºllen
                    if(d.quick) document.getElementById('quick-notes').value = d.quick;
                    if(d.journal) document.getElementById('journal-text').value = d.journal;
                    if(d.focus) document.getElementById('focus-text').value = d.focus;

                    badge.innerText = "Online";
                    badge.style.color = "var(--accent)";
                } else {
                    badge.innerText = "Sync Error";
                }
            } catch(e) {
                badge.innerText = "Offline";
            }
        }

        function autoSave() {
            clearTimeout(saveTimer);
            document.getElementById('status-badge').innerText = "Typing...";
            saveTimer = setTimeout(saveToCloud, 2000);
        }

        async function saveToCloud() {
            const badge = document.getElementById('status-badge');
            badge.innerText = "Saving...";

            let data = {
                quick: document.getElementById('quick-notes').value,
                journal: document.getElementById('journal-text').value,
                focus: document.getElementById('focus-text').value
            };

            try {
                await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json", "X-Master-Key": API_KEY },
                    body: JSON.stringify(data)
                });
                badge.innerText = "Saved";
                setTimeout(() => badge.innerText = "Online", 2000);
            } catch(e) {
                badge.innerText = "Save Failed";
            }
        }

        // --- UI FUNCTIONS ---

        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('de-DE', {hour:'2-digit', minute:'2-digit'});
            const dateStr = now.toLocaleDateString('de-DE', {weekday:'long', day:'numeric', month:'long'});
            
            document.getElementById('clock-c').innerText = timeStr;
            document.getElementById('clock-m').innerText = timeStr;
            document.getElementById('date-c').innerText = dateStr;
        }
        setInterval(updateTime, 1000);

        // Layout Switch (Classic <-> Modern)
        function switchLayout() {
            const classicDiv = document.getElementById('layout-classic');
            const modernDiv = document.getElementById('layout-modern');
            const navBar = document.getElementById('bottom-nav');
            const label = document.getElementById('layout-label');

            if(currentMode === 'classic') {
                // Zu Modern wechseln
                classicDiv.classList.remove('active');
                modernDiv.classList.add('active');
                navBar.classList.add('hidden'); // Nav verstecken
                currentMode = 'modern';
                label.innerText = "Modern";
            } else {
                // Zu Classic wechseln
                modernDiv.classList.remove('active');
                classicDiv.classList.add('active');
                navBar.classList.remove('hidden'); // Nav zeigen
                currentMode = 'classic';
                label.innerText = "Classic";
            }
        }

        // Tab Switch (Innerhalb von Classic)
        function switchTab(tabName, btnElement) {
            // Alle Tabs ausblenden
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Gew√§hlten Tab einblenden
            document.getElementById('tab-' + tabName).classList.add('active');

            // Buttons updaten
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            btnElement.classList.add('active');
        }

        // Colors
        function toggleColorMenu() {
            const m = document.getElementById('color-menu');
            m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        }
        function setAccent(color) {
            document.documentElement.style.setProperty('--accent', color);
            localStorage.setItem('nexus_color', color);
            toggleColorMenu();
        }

    </script>
</body>
</html>
